{
  "rules": [
    {
      "name": "bomb-squigs",
      "isExample": true,
      "exampleReason": "Reminder-only rule with manual activation.",
      "rule": {
        "id": "bomb-squigs",
        "name": "Bomb Squigs",
        "description": "Once per battle, for each bomb squig this unit has, after this unit ends a Normal move, you can use one Bomb Squig. If you do, select one enemy unit within 12\" and visible to this unit and roll one D6: on a 3+, that enemy unit suffers D3 mortal wounds. **Designer's Note:** Place two Bomb Squig tokens next to the unit, removing one each time this unit uses this ability.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "manual",
          "phase": "movement",
          "turn": "own",
          "limit": "once-per-battle"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "wild-ride",
      "isExample": true,
      "exampleReason": "Example of a reminder in multiple phases.",
      "rule": {
        "id": "wild-ride",
        "name": "Wild Ride",
        "description": "You can ignore any or all modifiers to this unit's Move characteristic and to Advance and Charge rolls made for this unit.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "manual",
          "phase": [
            "movement",
            "charge"
          ],
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "waaagh-charge-after-advance",
      "isExample": false,
      "exampleReason": "Part 4 of Waaagh!. Shows a reminder-only rule that grants an ability we can't calculate. Together, these 4 Waaagh! rules show how to decompose complex faction abilities into independent, testable pieces.",
      "rule": {
        "id": "waaagh-charge-after-advance",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army and: Units from your army with this ability are eligible to declare a charge in a turn in which they Advanced. Add 1 to the Strength and Attacks characteristics of melee weapons equipped by models from your army with this ability. Models from your army with this ability have a 5+ invulnerable save.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "charge",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "armyState",
          "is": [
            "waaagh-active"
          ]
        },
        "kind": "reminder"
      }
    },
    {
      "name": "might-is-right",
      "isExample": true,
      "exampleReason": "Example of a leader aura.",
      "rule": {
        "id": "might-is-right-hit",
        "name": "Might is Right",
        "description": "While this model is leading a unit, each time a model in that unit makes a melee attack, add 1 to the Hit roll.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "isLeading"
            },
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modHit",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "tank-hunter",
      "isExample": true,
      "exampleReason": "Demonstrates target-category conditions (VEHICLE) and reroll effects. Shows how to handle \"against X targets\" mechanics.",
      "rule": {
        "id": "tank-hunter",
        "name": "Tank Hunter",
        "description": "Each time this model makes a ranged attack that targets a VEHICLE unit, re-roll a Wound roll of 1.",
        "faction": "Space Marines",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "shooting",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "weaponType",
              "any": [
                "ranged"
              ]
            },
            {
              "t": "targetCategory",
              "any": [
                "VEHICLE"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "reroll",
                "phase": "wound",
                "kind": "ones"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "devastating-strikes",
      "isExample": false,
      "rule": {
        "id": "devastating-strikes",
        "name": "Devastating Strikes",
        "description": "Each time this model makes a melee attack, you can re-roll the Damage roll.",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "weaponType",
          "any": [
            "melee"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "reroll",
                "phase": "damage",
                "kind": "all"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "dakka-dakka-dakka",
      "isExample": false,
      "exampleReason": "Simple automatic keyword addition. Shows the most basic pattern: check weapon type condition, add keyword. No user input needed.",
      "rule": {
        "id": "dakka-dakka-dakka",
        "name": "Dakka Dakka Dakka",
        "description": "Each time a model in this unit makes a ranged attack, an unmodified hit roll of 6 automatically wounds the target.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "shooting",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "weaponType",
          "any": [
            "ranged"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "addWeaponAbility",
                "ability": {
                  "t": "flag",
                  "id": "lethalHits"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "furious-charge",
      "isExample": false,
      "exampleReason": "Shows unit-status conditions (charged) and temporary duration (turn). Demonstrates abilities that trigger based on unit actions.",
      "rule": {
        "id": "furious-charge",
        "name": "Furious Charge",
        "description": "Each time this unit makes a Charge move, until the end of the turn, add 1 to the Strength characteristic of melee weapons equipped by models in this unit.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            },
            {
              "t": "unitStatus",
              "has": [
                "charged"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "S",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "da-biggest-and-da-best",
      "isExample": true,
      "exampleReason": "Show how to check for army state conditions (like Waaagh!).",
      "rule": {
        "id": "da-biggest-and-da-best",
        "name": "Da Biggest and da Best",
        "description": "While the Waaagh! is active for your army, add 4 to the Attacks characteristic of this modelâ€™s melee weapons.",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            },
            {
              "t": "armyState",
              "is": [
                "waaagh-active"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "A",
                "add": 4
              }
            ]
          }
        ]
      }
    },
    {
      "name": "inspiring-presence",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "inspiring-presence",
        "name": "Inspiring Presence",
        "description": "+1 to wound",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWound",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "mob-rule",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "mob-rule",
        "name": "Mob Rule",
        "description": "+1 to wound",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWound",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "mob-mentality",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "mob-mentality",
        "name": "Mob Mentality",
        "description": "+1 to hit",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modHit",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "inspiring-aura",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "inspiring-aura",
        "name": "Inspiring Aura",
        "description": "+1 to wound",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWound",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "boy-specific",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "boy-specific",
        "name": "Boy Specific Ability",
        "description": "Empty reminder",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "boy-model-only",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "boy-model-only",
        "name": "Boy Model Only",
        "description": "Empty reminder",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "waaagh-call",
      "isExample": false,
      "exampleReason": "Part 1 of Waaagh! ability. Shows manual activation with once-per-battle limit. Demonstrates activating army-wide state. This reminder tells the player to activate the Waaagh! state, which the other 3 Waaagh! rules depend on.",
      "rule": {
        "id": "waaagh-call",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "manual",
          "phase": "command",
          "turn": "own",
          "limit": "once-per-battle"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "waaagh-strength",
      "isExample": false,
      "exampleReason": "Part 2 of Waaagh!. Shows army-state conditions (waaagh-active) and weapon stat modification. Demonstrates how global faction abilities affect combat.",
      "rule": {
        "id": "waaagh-strength",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army and: Add 1 to the Strength characteristics of melee weapons equipped by models from your army with this ability.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "armyState",
              "is": [
                "waaagh-active"
              ]
            },
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "S",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "waaagh-attacks",
      "isExample": false,
      "exampleReason": "Part 3 of Waaagh!. Same pattern as waaagh-strength but for Attacks characteristic. Shows how decomposing complex rules makes them easier to test and maintain.",
      "rule": {
        "id": "waaagh-attacks",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army and: Add 1 to the Attacks characteristics of melee weapons equipped by models from your army with this ability.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "armyState",
              "is": [
                "waaagh-active"
              ]
            },
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "A",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "waaagh-toughness",
      "isExample": false,
      "exampleReason": "Part 4 of Waaagh! (defensive). Shows modDefensiveStat effect for Toughness. Demonstrates defensive stat modification during Waaagh! when unit is being attacked.",
      "rule": {
        "id": "waaagh-toughness",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army and: Add 1 to the Toughness of models from your army with this ability.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "armyState",
          "is": [
            "waaagh-active"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modDefensiveStat",
                "stat": "T",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "waaagh-invuln",
      "isExample": false,
      "exampleReason": "An example of how to check for waaagh-active state. (Waaagh is special cased in the app logic)",
      "rule": {
        "id": "waaagh-invuln",
        "name": "Waaagh!",
        "description": "If your Army Faction is Orks, once per battle, at the start of your Command phase, you can call a Waaagh! If you do, until the start of your next Command phase, the Waaagh! is active for your army and: Models from your army with this ability have a 5+ invulnerable save.",
        "faction": "Orks",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "armyState",
          "is": [
            "waaagh-active"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "setInvuln",
                "n": 5
              }
            ]
          }
        ]
      }
    },
    {
      "name": "krumpin-time",
      "isExample": false,
      "exampleReason": "Another stat modification rule. Shows basic pattern with no special conditions beyond combat role and weapon type.",
      "rule": {
        "id": "krumpin-time",
        "name": "Krumpin' Time",
        "description": "Each time a model in this unit makes a melee attack, add 1 to the Strength characteristic of that attack.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "weaponType",
          "any": [
            "melee"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "S",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "skulking-horrors",
      "isExample": true,
      "exampleReason": "Reactive rule reminder.",
      "rule": {
        "id": "skulking-horrors",
        "name": "Skulking Horrors",
        "description": "Once per turn, when an enemy unit ends a Normal, Advance or Fall Back move within 9\" of this unit, if this unit is not within Engagement Range of one or more enemy units, it can make a Normal move of up to D6",
        "faction": "Tyranids",
        "scope": "unit",
        "trigger": {
          "t": "reactive",
          "phase": "movement",
          "turn": "opponent",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "drive-by-dakka",
      "isExample": true,
      "exampleReason": "Demonstrates using a choice for range checking. Since the app cannot automatically determine if a target is within 9\", this requires player input as a choice.",
      "rule": {
        "id": "drive-by-dakka",
        "name": "Drive-by Dakka",
        "description": "Each time a model in this unit makes a ranged attack that targets a unit within 9\", improve the Armour Penetration characteristic of that attack by 1.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "shooting",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "weaponType",
          "any": [
            "ranged"
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "target-within-9",
          "prompt": "Is the target within 9\"?",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no",
              "label": "No",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "yes",
              "label": "Yes",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "AP",
                      "add": -1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "damage-boost-leader",
      "isExample": false,
      "exampleReason": "",
      "rule": {
        "id": "damage-boost-leader",
        "name": "Damage Boost (Leader)",
        "description": "Leader-only test rule that adds +2 damage",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isLeading"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "D",
                "add": 2
              }
            ]
          }
        ]
      }
    },
    {
      "name": "shooty-power-trip",
      "isExample": true,
      "exampleReason": "Radio input representing die roll outcomes with multiple effects.",
      "rule": {
        "id": "shooty-power-trip",
        "name": "Shooty Power Trip",
        "description": "Each time this unit is selected to shoot, you can roll one D6: On a 1-2, this unit suffers D3 mortal wounds. On a 3-4, until the end of the phase, add 1 to the Strength characteristic of ranged weapons equipped by models in this unit. On a 5-6, until the end of the phase, add 1 to the Attacks characteristic of ranged weapons equipped by models in this unit.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "manual",
          "phase": "shooting",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "weaponType",
          "any": [
            "ranged"
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "power-trip-roll",
          "prompt": "D6 Roll Result",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no-roll",
              "label": "Not activated",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "1-2",
              "label": "1-2 (D3 mortal wounds)",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "3-4",
              "label": "3-4 (+1 Strength)",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "S",
                      "add": 1
                    }
                  ]
                }
              ]
            },
            {
              "v": "5-6",
              "label": "5-6 (+1 Attacks)",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "A",
                      "add": 1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "waaagh-energy",
      "isExample": true,
      "exampleReason": "Demonstrates radio input. Shows how effects scale with context (more models = stronger ability), but we can just ask the player for complicated conditional state.",
      "rule": {
        "id": "waaagh-energy",
        "name": "Waaagh! Energy",
        "description": "While this model is leading a unit, add 1 to the Strength and Damage characteristics of this model's 'Eadbanger weapon for every 5 models in that unit (rounding down), but while that unit contains 10 or more models, that weapon has the [HAZARDOUS] ability.",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isLeading"
        },
        "kind": "choice",
        "choice": {
          "id": "unit-size",
          "prompt": "Unit size (models in led unit)",
          "lifetime": {
            "t": "game"
          },
          "options": [
            {
              "v": "0-4",
              "label": "0-4 models (+0)",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "5-9",
              "label": "5-9 models (+1 S/D)",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "S",
                      "add": 1
                    },
                    {
                      "t": "modWeaponStat",
                      "stat": "D",
                      "add": 1
                    }
                  ]
                }
              ]
            },
            {
              "v": "10-14",
              "label": "10-14 models (+2 S/D, HAZARDOUS)",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "S",
                      "add": 2
                    },
                    {
                      "t": "modWeaponStat",
                      "stat": "D",
                      "add": 2
                    },
                    {
                      "t": "addWeaponAbility",
                      "ability": {
                        "t": "flag",
                        "id": "hazardous"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "v": "15+",
              "label": "15+ models (+3 S/D, HAZARDOUS)",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modWeaponStat",
                      "stat": "S",
                      "add": 3
                    },
                    {
                      "t": "modWeaponStat",
                      "stat": "D",
                      "add": 3
                    },
                    {
                      "t": "addWeaponAbility",
                      "ability": {
                        "t": "flag",
                        "id": "hazardous"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "super-runts-scouts",
      "isExample": true,
      "exampleReason": "Part 1 of Super Runts. Grants Scouts 9\" ability. Shows parameterized unit ability.",
      "rule": {
        "id": "super-runts-scouts",
        "name": "Super Runts",
        "description": "While this model is leading a unit: Models in that unit have the Scouts 9\" ability. Each time a model in that unit makes an attack, add 1 to the Hit roll and add 1 to the Wound roll. Each time an attack targets that unit, subtract 1 from the Wound roll.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isLeading"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "addUnitAbility",
                "ability": {
                  "t": "scouts",
                  "distance": 9
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "super-runts-offense",
      "isExample": true,
      "exampleReason": "Part 2 of Super Runts shows offensive modifiers using modHit and modWound and modWoundAgainst. Engine will apply the modifiers at the right time.",
      "rule": {
        "id": "super-runts-offense",
        "name": "Super Runts",
        "description": "While this model is leading a unit: Models in that unit have the Scouts 9\" ability. Each time a model in that unit makes an attack, add 1 to the Hit roll and add 1 to the Wound roll. Each time an attack targets that unit, subtract 1 from the Wound roll.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isLeading"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modHit",
                "add": 1
              },
              {
                "t": "modWound",
                "add": 1
              },
              {
                "t": "modWoundAgainst",
                "add": -1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "special-dose",
      "isExample": false,
      "exampleReason": "Movement phase rule that modifies Move characteristic based on army state. Tests modMove effect and movement phase filtering.",
      "rule": {
        "id": "special-dose",
        "name": "Special Dose",
        "description": "Adds 6\" to Move when Waaagh! is active",
        "faction": "Orks",
        "scope": "model",
        "trigger": {
          "t": "automatic",
          "phase": "movement",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "armyState",
          "is": [
            "waaagh"
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modMove",
                "add": 6
              }
            ]
          }
        ]
      }
    },
    {
      "name": "get-da-good-bitz",
      "isExample": true,
      "exampleReason": "Objective control rules are usually reminders.",
      "rule": {
        "id": "get-da-good-bitz",
        "name": "Get Da Good Bitz",
        "description": "At the end of your Command phase, if this unit is within range of an objective marker you control, that objective marker remains under your control, even if you have no models within range of it, until your opponent controls it at the start or end of any turn.",
        "faction": "Orks",
        "scope": "unit",
        "trigger": {
          "t": "reactive",
          "phase": "command",
          "turn": "own",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "reminder"
      }
    },
    {
      "name": "hyper-adaptations-swarming",
      "isExample": true,
      "exampleReason": "Army-wide command phase choice that lasts entire game. Demonstrates army scope, game lifetime, and adding weapon abilities based on target category.",
      "rule": {
        "id": "hyper-adaptations",
        "name": "Hyper Adaptations",
        "description": "At the start of the first battle round, select one of the following Hyper-adaptations to be active for Tyranids units from your army until the end of the battle.",
        "faction": "Tyranids",
        "scope": "army",
        "trigger": {
          "t": "manual",
          "phase": "command",
          "turn": "own",
          "limit": "once-per-battle"
        },
        "when": {
          "t": "true"
        },
        "kind": "choice",
        "choice": {
          "id": "hyper-adaptations",
          "prompt": "Select a Hyper-adaptation for your army",
          "lifetime": {
            "t": "game"
          },
          "options": [
            {
              "v": "swarming-instincts",
              "label": "Swarming Instincts",
              "then": [
                {
                  "t": "if",
                  "when": {
                    "t": "targetCategory",
                    "any": ["Infantry", "Swarm"]
                  },
                  "then": [
                    {
                      "t": "do",
                      "fx": [
                        {
                          "t": "addWeaponAbility",
                          "ability": {
                            "t": "sustainedHits",
                            "x": 1
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "v": "hyper-aggression",
              "label": "Hyper-Aggression",
              "then": [
                {
                  "t": "if",
                  "when": {
                    "t": "targetCategory",
                    "any": ["Monster", "Vehicle"]
                  },
                  "then": [
                    {
                      "t": "do",
                      "fx": [
                        {
                          "t": "addWeaponAbility",
                          "ability": {
                            "t": "flag",
                            "id": "lethalHits"
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "v": "hive-predators",
              "label": "Hive Predators (precision is not implemented in the engine: track manually)",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            }
          ]
        }
      }
    },

    {
      "name": "oath-of-moment",
      "isExample": false,
      "exampleReason": "Army-wide ability that targets a specific enemy unit and lasts until next command phase. Demonstrates isTargetedUnit condition and phase-based lifetime.",
      "rule": {
        "id": "oath-of-moment",
        "name": "Oath of Moment",
        "description": "At the start of your Command phase, select one unit from your opponent's army. Until the start of your next Command phase, that enemy unit is your Oath of Moment target. Each time a model with this ability makes an attack that targets your Oath of Moment target, you can re-roll the Hit roll and add 1 to the Wound roll.",
        "faction": "Adeptus Astartes",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isTargetedUnit"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "reroll",
                "phase": "hit",
                "kind": "failed"
              },
              {
                "t": "modWound",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "psychic-hood",
      "isExample": false,
      "exampleReason": "Defensive ability that grants FNP against psychic attacks. Tests attackHasAbility condition with typed canonical abilities.",
      "rule": {
        "id": "psychic-hood",
        "name": "Psychic Hood",
        "description": "While this model is leading a unit, models in that unit have the Feel No Pain 4+ ability against Psychic Attacks.",
        "faction": "Adeptus Astartes",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "isLeading"
            },
            {
              "t": "attackHasAbility",
              "ability": {
                "t": "flag",
                "id": "psychic"
              }
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "setFNP",
                "n": 4
              }
            ]
          }
        ]
      }
    },
    {
      "name": "thunderous-charge",
      "isExample": false,
      "exampleReason": "Weapon-name specific melee modifier gated by charged status.",
      "rule": {
        "id": "thunderous-charge",
        "name": "Thunderous Charge",
        "description": "Each time a model in this unit makes a melee attack with its Wolf Guard weapon, if it made a Charge move this turn, add 1 to the Damage characteristic of that attack.",
        "faction": "Adeptus Astartes",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "fight",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "weaponType",
              "any": [
                "melee"
              ]
            },
            {
              "t": "weaponName",
              "is": "Wolf Guard weapon"
            },
            {
              "t": "unitStatus",
              "has": [
                "charged"
              ]
            }
          ]
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modWeaponStat",
                "stat": "D",
                "add": 1
              }
            ]
          }
        ]
      }
    },
    {
      "name": "death-guard-plague-choice",
      "isExample": false,
      "exampleReason": "Death Guard army-wide start-of-battle plague selection.",
      "rule": {
        "id": "death-guard-plague",
        "name": "Afflicted Plague",
        "description": "During Declare Battle Formations, select one plague. It applies to Afflicted enemy units for the rest of the battle.",
        "faction": "Death Guard",
        "scope": "army",
        "trigger": {
          "t": "manual",
          "phase": "command",
          "turn": "own",
          "limit": "once-per-battle"
        },
        "when": {
          "t": "true"
        },
        "kind": "choice",
        "choice": {
          "id": "death-guard-plague",
          "prompt": "Select your plague for this battle",
          "lifetime": {
            "t": "game"
          },
          "options": [
            {
              "v": "skullsquirm-blight",
              "label": "Skullsquirm Blight",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "rattlejoint-ague",
              "label": "Rattlejoint Ague",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "scabrous-soulrot",
              "label": "Scabrous Soulrot",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "death-guard-afflicted-skullsquirm-attack",
      "isExample": false,
      "exampleReason": "Skullsquirm: afflicted target gets -1 Toughness when Death Guard attack it.",
      "rule": {
        "id": "death-guard-afflicted-skullsquirm-attack",
        "name": "Nurgle's Gift (Skullsquirm)",
        "description": "While an enemy unit is Afflicted, subtract 1 from Toughness. Skullsquirm also affects hit rolls when afflicted units attack.",
        "faction": "Death Guard",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "combatRole",
              "is": "attacker"
            },
            {
              "t": "armyChoice",
              "choiceId": "death-guard-plague",
              "is": ["skullsquirm-blight"]
            }
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "target-afflicted",
          "prompt": "Is the target unit Afflicted?",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no",
              "label": "No",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "yes",
              "label": "Yes",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modDefensiveStat",
                      "stat": "T",
                      "add": -1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "death-guard-afflicted-skullsquirm-defense",
      "isExample": false,
      "exampleReason": "Skullsquirm: afflicted attacking unit gets -1 to hit when targeting Death Guard.",
      "rule": {
        "id": "death-guard-afflicted-skullsquirm-defense",
        "name": "Nurgle's Gift (Skullsquirm)",
        "description": "Each time a model in an Afflicted unit makes an attack, subtract 1 from the Hit roll.",
        "faction": "Death Guard",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "combatRole",
              "is": "defender"
            },
            {
              "t": "armyChoice",
              "choiceId": "death-guard-plague",
              "is": ["skullsquirm-blight"]
            }
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "attacker-afflicted",
          "prompt": "Is the attacking unit Afflicted?",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no",
              "label": "No",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "yes",
              "label": "Yes",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modHitAgainst",
                      "add": -1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "death-guard-afflicted-rattlejoint",
      "isExample": false,
      "exampleReason": "Rattlejoint: afflicted target gets -1 Toughness and worsened Save when Death Guard attack it.",
      "rule": {
        "id": "death-guard-afflicted-rattlejoint",
        "name": "Nurgle's Gift (Rattlejoint)",
        "description": "While an enemy unit is Afflicted, subtract 1 from Toughness and worsen Save by 1.",
        "faction": "Death Guard",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "combatRole",
              "is": "attacker"
            },
            {
              "t": "armyChoice",
              "choiceId": "death-guard-plague",
              "is": ["rattlejoint-ague"]
            }
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "target-afflicted",
          "prompt": "Is the target unit Afflicted?",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no",
              "label": "No",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "yes",
              "label": "Yes",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modDefensiveStat",
                      "stat": "T",
                      "add": -1
                    },
                    {
                      "t": "modDefensiveStat",
                      "stat": "SV",
                      "add": 1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "death-guard-afflicted-scabrous",
      "isExample": false,
      "exampleReason": "Scabrous: afflicted target gets -1 Toughness in combat calculator; Move/Ld/OC are tracked outside this calculator.",
      "rule": {
        "id": "death-guard-afflicted-scabrous",
        "name": "Nurgle's Gift (Scabrous)",
        "description": "While an enemy unit is Afflicted, subtract 1 from Toughness. Also worsen Move, Leadership and Objective Control by 1 (track outside combat calculator).",
        "faction": "Death Guard",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "all",
          "xs": [
            {
              "t": "combatRole",
              "is": "attacker"
            },
            {
              "t": "armyChoice",
              "choiceId": "death-guard-plague",
              "is": ["scabrous-soulrot"]
            }
          ]
        },
        "kind": "choice",
        "choice": {
          "id": "target-afflicted",
          "prompt": "Is the target unit Afflicted?",
          "lifetime": {
            "t": "roll"
          },
          "options": [
            {
              "v": "no",
              "label": "No",
              "then": [
                {
                  "t": "do",
                  "fx": []
                }
              ]
            },
            {
              "v": "yes",
              "label": "Yes",
              "then": [
                {
                  "t": "do",
                  "fx": [
                    {
                      "t": "modDefensiveStat",
                      "stat": "T",
                      "add": -1
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    {
      "name": "set-toughness-seven",
      "isExample": false,
      "exampleReason": "Sets defender Toughness to a fixed value. Used to test setToughness effect handling.",
      "rule": {
        "id": "set-toughness-seven",
        "name": "Set Toughness Seven",
        "description": "Set the target unit's Toughness to 7.",
        "faction": "Test Faction",
        "scope": "army",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "combatRole",
          "is": "attacker"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "setToughness",
                "n": 7
              }
            ]
          }
        ]
      }
    },
    {
      "name": "attached-leader-fnp4",
      "isExample": false,
      "exampleReason": "Unit rule that grants Feel No Pain 4+ to the attached leader only while it is leading.",
      "rule": {
        "id": "attached-leader-fnp4",
        "name": "Attached Leader FNP 4+",
        "description": "While a Character model is leading this unit, that Character model has Feel No Pain 4+.",
        "faction": "Test Faction",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "isAttachedLeader"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "setFNP",
                "n": 4
              }
            ]
          }
        ]
      }
    },
    {
      "name": "defensive-hit-penalty",
      "isExample": false,
      "exampleReason": "Defender-side hit penalty using modHitAgainst. Used to test attacker/defender hit modifier merge.",
      "rule": {
        "id": "defensive-hit-penalty",
        "name": "Defensive Hit Penalty",
        "description": "Each time an attack targets this unit, subtract 1 from the Hit roll.",
        "faction": "Test Faction",
        "scope": "unit",
        "trigger": {
          "t": "automatic",
          "phase": "any",
          "turn": "both",
          "limit": "none"
        },
        "when": {
          "t": "true"
        },
        "kind": "passive",
        "then": [
          {
            "t": "do",
            "fx": [
              {
                "t": "modHitAgainst",
                "add": -1
              }
            ]
          }
        ]
      }
    }
  ]
}
